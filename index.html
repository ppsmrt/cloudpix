<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>CloudPix — Premium Image Host</title>

<!-- Tailwind CDN -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Icons -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

<!-- App font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet"/>

<style>
  :root{
    --bg-1: #071029;
    --bg-2: #0b1220;
  }
  html,body{
    height:100%;
    margin:0;
    font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg,var(--bg-1),var(--bg-2));
    color: #e6eef8;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  /* App shell */
  .app { min-height:100vh; display:flex; flex-direction:column; }

  header.app-bar {
    height:72px; display:flex; align-items:center; justify-content:space-between;
    padding:0 16px; gap:12px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    border-bottom: 1px solid rgba(255,255,255,0.03);
    backdrop-filter: blur(6px);
    position:sticky; top:0; z-index:60;
  }

  .brand { display:flex; gap:12px; align-items:center; }
  .brand .logo {
    width:48px;height:48px;border-radius:12px;
    background: linear-gradient(135deg,#7c3aed,#06b6d4);
    display:flex;align-items:center;justify-content:center;
    box-shadow: 0 8px 24px rgba(12,18,32,0.6);
    font-weight:700;font-size:18px;color:white;
  }

  main.container {
    flex:1; width:100%; max-width:920px; margin:18px auto; padding:12px 16px 96px;
  }

  .card {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border: 1px solid rgba(255,255,255,0.03);
    padding:16px;
    border-radius:12px;
    box-shadow: 0 10px 30px rgba(2,6,23,0.6);
  }

  .drop {
    border-radius:12px; padding:18px; border: 1px dashed rgba(255,255,255,0.06);
    display:flex; align-items:center; gap:14px; transition: all .22s ease;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
  }
  .drop.dragover{
    transform: translateY(-6px);
    box-shadow: 0 20px 40px rgba(2,6,23,0.7);
    border-color: rgba(124,58,237,0.9);
    background: linear-gradient(90deg, rgba(124,58,237,0.06), rgba(6,182,212,0.04));
  }

  .uploader-actions { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }

  .btn { padding:10px 14px; border-radius:10px; font-weight:600; display:inline-flex; gap:8px; align-items:center; cursor:pointer; user-select:none; }
  .btn-primary{ background: linear-gradient(90deg,#7c3aed,#06b6d4); color:white; box-shadow: 0 8px 20px rgba(7,12,28,0.6); }
  .btn-ghost { background: transparent; border: 1px solid rgba(255,255,255,0.04); color:rgba(255,255,255,0.8); }

  .progress { height:10px; background: rgba(255,255,255,0.04); border-radius:999px; overflow:hidden; }
  .progress > div { height:100%; width:0%; background: linear-gradient(90deg,#06b6d4,#7c3aed); transition:width .2s linear; }

  .gallery { display:grid; grid-template-columns: repeat(auto-fill,minmax(160px,1fr)); gap:12px; margin-top:14px; }
  .tile { border-radius:12px; overflow:hidden; position:relative; background:rgba(0,0,0,0.12); min-height:120px; display:flex;align-items:center;justify-content:center; }
  .tile img { width:100%; height:100%; object-fit:cover; display:block; transition: transform .35s ease; }
  .tile:hover img { transform:scale(1.06); }
  .tile .meta { position:absolute; left:8px; bottom:8px; right:8px; display:flex; justify-content:space-between; gap:8px; }
  .chip { background:rgba(0,0,0,0.45); padding:6px 8px; border-radius:10px; font-size:12px; color:#eef; display:inline-flex; gap:8px; align-items:center; }

  .modal-backdrop { position:fixed; inset:0; background:linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.7)); display:flex; align-items:center; justify-content:center; z-index:80; }
  .modal { width:92%; max-width:920px; border-radius:12px; overflow:hidden; }

  nav.bottom-nav { position:fixed; left:0; right:0; bottom:10px; z-index:70; display:flex; justify-content:center; }
  .nav-wrap { width:100%; max-width:880px; padding:8px; display:flex; justify-content:space-between; gap:8px; }
  .tab { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:10px 14px; border-radius:12px; display:flex; gap:10px; align-items:center; color:rgba(255,255,255,0.7); border:1px solid rgba(255,255,255,0.03); }
  .tab.active { color:white; box-shadow: 0 8px 28px rgba(7,12,28,0.6); background: linear-gradient(90deg,#7c3aed,#06b6d4); }

  .pulse { animation: pulse 2s infinite; }
  @keyframes pulse { 0%{transform:scale(1);} 50%{transform:scale(1.02);} 100%{transform:scale(1);} }

  .toast-wrap { position: fixed; right:18px; bottom:88px; z-index:90; display:flex; flex-direction:column; gap:10px; align-items:flex-end; }
  .toast { padding:10px 14px; border-radius:12px; box-shadow:0 8px 30px rgba(2,6,23,0.6); backdrop-filter: blur(6px); color:white; font-weight:600; }

  /* small responsive */
  @media (max-width:640px) {
    header.app-bar { height:64px; padding:0 12px; } .brand .logo { width:44px;height:44px }
    main.container { padding:8px 12px 120px; }
  }
</style>
</head>
<body>
  <div class="app">

    <!-- Header -->
    <header class="app-bar">
      <div class="brand">
        <div class="logo">CP</div>
        <div>
          <div class="text-sm text-slate-300">CloudPix</div>
          <div class="text-xs text-slate-400">Premium Image Hosting</div>
        </div>
      </div>

      <div class="flex items-center gap-3">
        <button id="btn-help" class="btn btn-ghost" title="Help"><i class="fa-solid fa-circle-info"></i></button>
        <button id="btn-profile" class="btn btn-ghost" title="Profile"><i class="fa-regular fa-user"></i></button>
      </div>
    </header>

    <!-- Main -->
    <main class="container">

      <!-- Uploader card -->
      <section class="card mb-4">
        <div class="flex items-start gap-4">
          <div class="flex-1">
            <h2 class="text-xl font-semibold mb-1">Upload Image</h2>
            <p class="text-sm text-slate-300 mb-3">Drag & drop or pick an image. Animated uploads, instant preview, shareable link.</p>

            <!-- Drag-n-drop area -->
            <div id="drop-area" class="drop" tabindex="0">
              <div class="flex flex-col items-start gap-2">
                <div class="flex items-center gap-3">
                  <div class="h-12 w-12 rounded-lg bg-white/5 flex items-center justify-center">
                    <i class="fa-solid fa-image text-2xl text-slate-200"></i>
                  </div>
                  <div>
                    <div class="text-sm">Drop image here or</div>
                    <label for="file-input" class="btn btn-ghost mt-1 inline-flex items-center gap-2"><i class="fa-solid fa-folder-open"></i> Choose file</label>
                  </div>
                </div>
                <div class="text-xs text-slate-400">PNG, JPG, WEBP — Max 10MB recommended</div>
              </div>

              <div class="ml-auto uploader-actions">
                <button id="upload-now" class="btn btn-primary hidden"><i class="fa-solid fa-cloud-upload-alt"></i> Upload</button>
              </div>
            </div>

            <!-- hidden input -->
            <input id="file-input" type="file" accept="image/*" class="hidden mt-2" />

            <!-- progress + status -->
            <div class="mt-3 flex items-center gap-3">
              <div class="progress flex-1"><div id="progress-bar"></div></div>
              <div id="status-text" class="text-xs text-slate-400 w-36 text-right">No file selected</div>
            </div>
          </div>

          <!-- preview card (small) -->
          <div class="w-36 hidden md:block">
            <div id="mini-preview" class="rounded-lg overflow-hidden bg-black/20 h-36 flex items-center justify-center">
              <i class="fa-regular fa-image text-3xl text-slate-400"></i>
            </div>
            <div class="mt-2 text-xs text-slate-400">Preview</div>
          </div>
        </div>
      </section>

      <!-- Gallery + recent uploads -->
      <section class="card">
        <div class="flex items-center justify-between mb-3">
          <div>
            <div class="text-sm text-slate-300">Recent Uploads</div>
            <div class="text-xs text-slate-400">Tap to preview, long press (or click menu) for actions</div>
          </div>
          <div class="flex items-center gap-2">
            <button id="refresh-gallery" class="btn btn-ghost"><i class="fa-solid fa-arrows-rotate"></i></button>
            <button id="clear-gallery" class="btn btn-ghost"><i class="fa-solid fa-trash"></i></button>
          </div>
        </div>

        <div id="gallery" class="gallery">
          <!-- placeholder sample tiles (so it looks premium even before uploads) -->
          <div class="tile"><img src="https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?q=80&w=800&auto=format&fit=crop" alt="sample1"/><div class="meta"><div class="chip"><i class="fa-solid fa-clock"></i> 2h</div><div class="chip"><i class="fa-solid fa-link"></i></div></div></div>
          <div class="tile"><img src="https://images.unsplash.com/photo-1495567720989-cebdbdd97913?q=80&w=800&auto=format&fit=crop" alt="sample2"/><div class="meta"><div class="chip">Sample</div><div class="chip">Nice</div></div></div>
          <div class="tile"><img src="https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?q=80&w=800&auto=format&fit=crop" alt="sample3"/><div class="meta"><div class="chip">Demo</div><div class="chip">Full HD</div></div></div>
          <div class="tile"><img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=800&auto=format&fit=crop" alt="sample4"/><div class="meta"><div class="chip">Sample</div><div class="chip">Art</div></div></div>
          <div class="tile"><img src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=800&auto=format&fit=crop" alt="sample5"/><div class="meta"><div class="chip">Nature</div><div class="chip">4K</div></div></div>
          <div class="tile"><img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?q=80&w=800&auto=format&fit=crop" alt="sample6"/><div class="meta"><div class="chip">Sample</div><div class="chip"><i class="fa-solid fa-heart"></i></div></div></div>
        </div>
      </section>

    </main>

    <!-- bottom nav -->
    <nav class="bottom-nav">
      <div class="nav-wrap">
        <div class="tab active"><i class="fa-solid fa-home"></i> <span class="hidden sm:inline">Home</span></div>
        <div id="tab-upload" class="tab"><i class="fa-solid fa-upload"></i> <span class="hidden sm:inline">Upload</span></div>
        <div id="tab-links" class="tab"><i class="fa-solid fa-link"></i> <span class="hidden sm:inline">Links</span></div>
        <div class="tab"><i class="fa-solid fa-cog"></i> <span class="hidden sm:inline">Settings</span></div>
      </div>
    </nav>

    <!-- toasts -->
    <div class="toast-wrap" id="toasts"></div>

    <!-- modal (hidden) -->
    <div id="modal-root" class="hidden"></div>

  </div>

<!-- JS -->
<script>
/* ========== CONFIG ========== */
/* Replace with your imgbb key */
const imgbbKey = '8604e4b4050c63c460d0bca39cf28708';

/* state */
const fileInput = document.getElementById('file-input');
const dropArea = document.getElementById('drop-area');
const uploadNowBtn = document.getElementById('upload-now');
const progressBar = document.getElementById('progress-bar');
const statusText = document.getElementById('status-text');
const miniPreview = document.getElementById('mini-preview');
const gallery = document.getElementById('gallery');
const toasts = document.getElementById('toasts');
const modalRoot = document.getElementById('modal-root');

let currentFile = null;
let uploads = []; // local list of uploaded items (url, name, time)

/* Utils */
function showToast(msg, type='info'){
  const el = document.createElement('div');
  el.className = 'toast';
  el.style.background = type==='success'? 'linear-gradient(90deg,#10b981,#059669)' : type==='error'? 'linear-gradient(90deg,#ef4444,#dc2626)' : 'linear-gradient(90deg,#06b6d4,#7c3aed)';
  el.textContent = msg;
  toasts.appendChild(el);
  setTimeout(()=> el.remove(), 3000);
}

/* File selection */
dropArea.addEventListener('click', ()=> fileInput.click());
fileInput.addEventListener('change', (e)=>{
  if(e.target.files && e.target.files[0]) handleSelectedFile(e.target.files[0]);
});

/* drag/drop */
['dragenter','dragover'].forEach(ev=>{
  dropArea.addEventListener(ev, (e)=>{ e.preventDefault(); e.stopPropagation(); dropArea.classList.add('dragover'); });
});
['dragleave','drop'].forEach(ev=>{
  dropArea.addEventListener(ev, (e)=>{ e.preventDefault(); e.stopPropagation(); dropArea.classList.remove('dragover'); });
});
dropArea.addEventListener('drop', (e)=>{
  const f = e.dataTransfer.files && e.dataTransfer.files[0];
  if(f) handleSelectedFile(f);
});

/* keyboard accessibility: Enter to open file picker */
dropArea.addEventListener('keydown', (e)=> { if(e.key==='Enter') fileInput.click(); });

function handleSelectedFile(file){
  if (!file) return;
  if (!file.type.startsWith('image/')) { showToast('Please select an image file', 'error'); return; }
  if (file.size > 12 * 1024 * 1024) { showToast('File too large (max 12MB)', 'error'); return; }

  currentFile = file;
  statusText.textContent = `Ready: ${file.name}`;
  uploadNowBtn.classList.remove('hidden');
  // show mini preview
  const reader = new FileReader();
  reader.onload = (ev) => {
    miniPreview.innerHTML = `<img src="${ev.target.result}" alt="preview" class="w-full h-full object-cover">`;
  };
  reader.readAsDataURL(file);
}

/* Upload flow with XHR to show progress */
uploadNowBtn.addEventListener('click', () => {
  if(!currentFile){ showToast('No file selected', 'error'); return; }
  uploadFile(currentFile);
});

/* Programmatic upload (called from internal demos if needed) */
async function uploadFile(file){
  statusText.textContent = 'Uploading...';
  progressBar.style.width = '0%';
  uploadNowBtn.classList.add('hidden');

  // Provide animated progress using XHR
  const form = new FormData();
  form.append('image', file);

  // Use XHR to get progress events
  const xhr = new XMLHttpRequest();
  xhr.open('POST', `https://api.imgbb.com/1/upload?key=${imgbbKey}`);

  xhr.upload.onprogress = function(e){
    if(e.lengthComputable){
      const pct = Math.round((e.loaded / e.total) * 100);
      progressBar.style.width = pct + '%';
      statusText.textContent = `Uploading — ${pct}%`;
    }
  };

  xhr.onreadystatechange = function(){
    if(xhr.readyState === 4){
      try {
        const res = JSON.parse(xhr.responseText);
        if(res && res.success){
          const url = res.data.url;
          statusText.textContent = 'Upload complete';
          progressBar.style.width = '100%';
          showToast('Upload finished', 'success');
          addToGallery({ url, name: file.name, time: new Date().toISOString() });
          currentFile = null;
          miniPreview.innerHTML = '<i class="fa-regular fa-image text-3xl text-slate-400"></i>';
        } else {
          statusText.textContent = 'Upload failed';
          showToast('Upload failed', 'error');
        }
      } catch(err){
        console.error(err);
        statusText.textContent = 'Upload error';
        showToast('Upload error', 'error');
      } finally {
        setTimeout(()=> progressBar.style.width = '0%', 700);
      }
    }
  };

  xhr.onerror = function(){
    statusText.textContent = 'Network error';
    showToast('Network error', 'error');
    uploadNowBtn.classList.remove('hidden');
  };

  xhr.send(form);
}

/* Add tile to gallery */
function addToGallery(item){
  uploads.unshift(item); // add to start

  const tile = document.createElement('div');
  tile.className = 'tile';
  tile.innerHTML = `
    <img src="${item.url}" alt="${escapeHtml(item.name)}" loading="lazy" />
    <div class="meta">
      <div class="chip"><i class="fa-solid fa-clock"></i> Now</div>
      <div class="chip actions">
        <button class="btn btn-ghost btn-sm copy" title="Copy link"><i class="fa-solid fa-link"></i></button>
        <button class="btn btn-ghost btn-sm preview" title="Preview"><i class="fa-solid fa-eye"></i></button>
        <button class="btn btn-ghost btn-sm delete" title="Remove"><i class="fa-solid fa-trash"></i></button>
      </div>
    </div>
  `;

  // wire actions
  const img = tile.querySelector('img');
  tile.querySelector('.copy').addEventListener('click', () => {
    navigator.clipboard.writeText(item.url).then(()=> showToast('Link copied', 'success'));
  });
  tile.querySelector('.preview').addEventListener('click', ()=> openModal(item));
  tile.querySelector('.delete').addEventListener('click', ()=> {
    tile.remove();
    showToast('Removed from gallery', 'info');
  });

  // add to gallery top
  gallery.prepend(tile);
}

/* Modal viewer */
function openModal(item){
  modalRoot.innerHTML = `
    <div class="modal-backdrop" id="modal-backdrop">
      <div class="modal card">
        <div class="flex items-start gap-4 p-4">
          <div class="flex-1">
            <img src="${item.url}" alt="${escapeHtml(item.name)}" style="width:100%; height:auto; border-radius:8px; display:block;" />
            <div class="mt-3 flex items-center justify-between gap-3">
              <div class="text-sm text-slate-300">${escapeHtml(item.name)}</div>
              <div class="flex gap-2">
                <button class="btn btn-primary" id="modal-copy"><i class="fa-solid fa-link"></i> Copy</button>
                <a class="btn btn-ghost" href="${item.url}" target="_blank" rel="noreferrer"><i class="fa-solid fa-up-right-from-square"></i> Open</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  `;
  modalRoot.classList.remove('hidden');
  document.getElementById('modal-backdrop').addEventListener('click',(e)=>{
    if(e.target.id === 'modal-backdrop') closeModal();
  });
  document.getElementById('modal-copy').addEventListener('click', ()=>{
    navigator.clipboard.writeText(item.url).then(()=> showToast('Copied', 'success'));
  });
}
function closeModal(){ modalRoot.innerHTML = ''; modalRoot.classList.add('hidden'); }

/* small helpers */
function escapeHtml(s){ return (s+'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

/* demo: refresh and clear gallery */
document.getElementById('refresh-gallery').addEventListener('click', ()=>{
  showToast('Gallery refreshed', 'info');
});
document.getElementById('clear-gallery').addEventListener('click', ()=>{
  // remove user-added tiles (keep sample images)
  const tiles = Array.from(gallery.children);
  tiles.slice(6).forEach(t => t.remove()); // keep first 6 sample tiles
  showToast('Cleared uploads', 'info');
});

/* bottom nav: quick actions */
document.getElementById('tab-upload').addEventListener('click', ()=> {
  // scroll to top where upload card sits
  window.scrollTo({ top: 0, behavior: 'smooth' });
  showToast('Go to upload', 'info');
});

/* Accessibility: keyboard escape closes modal */
document.addEventListener('keydown', (e)=> { if(e.key === 'Escape') closeModal(); });

/* Initial micro-animation on load */
setTimeout(()=> {
  const logo = document.querySelector('.brand .logo');
  logo.classList.add('pulse');
  setTimeout(()=> logo.classList.remove('pulse'), 1600);
}, 600);

/* NOTE:
 - This implementation uses imgbb (free image hosting) API: https://api.imgbb.com/1/upload
 - Replace `imgbbKey` with your API key. If you want to use your own backend or S3/COS, modify uploadFile() accordingly.
*/

</script>
</body>
</html>
